#!/bin/rpmbuild -ba
#This File is part of the Agender Project, 100% free  software
#you are free to modify it to build packages for your distro, patches are welcome :-)
#File: Agender.spec
#Created:01-abr-2010
#Author: Gabriel Espinoza
#License: GPLv3+
#Copyright: Copyright (C) 2010 Gabriel Espinoza
#Modified:
#
#this file was tested in the openSuSE Build Service
#

%if 0%{?suse_version}
	%define dist .suse%{suse_version}
%endif
%if 0%{?mdkversion}
	%define dist .mdk%{mdkversion}
%endif

Summary: A cross-platform schedule tool!
Summary(es): La agenda multiplataforma
Summary(fr): Un outil de planification multiplate-forme
Summary(el): Λογισμικό διαχείρισης προγράμματος που δουλεύει σε όλες τις πλατφόρμες
Summary(de): Ein plattformunabhängiges Zeitplanungs-Werkzeug
Summary(pt): Uma agenda multi-plataforma
Summary(sv): Ett plattformsoberoende schema verktyg
Summary(zh): 跨平台日程表工具
Summary(ja): クロスプラットフォームのスケジュール管理ツール
Summary(ro): Un utilitar multi-platformă de planificare
Summary(he): כלי ניהול זמן עבור מגוון פלטפורמות
Name: Agender
Packager: Gabriel Espinoza <virtuosonic@users.sourceforge.net>
Vendor: Virtuosonic
Distro: VirtuosoniX
Version: 2.0
Release: 1%{dist}
License: GPLv3+
Group: Applications/Office/Calendar
Source: %{name}-%{version}.tar.bz2
Icon: %{name}.xpm
URL: http://agender.sourceforge.net/
Requires: wxGTK >= 2.8.12
BuildRequires: wxGTK-devel >= 2.8.12,make,gcc-c++,bakefile
Prefix: %{_prefix}
BuildRoot: %{_tmppath}/%{name}-%{version}-build
%if 0%{?suse_version}
BuildRequires: update-desktop-files
%endif

%description
Agender is a small cross-platform schedule tool where you associate some notes
with a date or with no date in particular if  you mark the note as sticky, you
simply start it  and it will create a task-bar icon and stay in the background,
without annoying you, it can also be configured to run on login, on  Fluxbox,
IceWM and desktops that support freedesktop.org

%description -l es
Agender es una agenda multi-plataforma con la que puede asociar  notas
con una fecha o ninguna fecha en particular si la marca como fija, simplemente
lo inicia y creara un icono en la barra de tareas y permanecera ejecutandose de fondo,
sin molestarlo, tambien puede ser configurado para que con su sesion de usuario,
en Fluxbox, IceWM y escritorios compatibles con freedesktop.org

%prep
%setup -q

%build
	cd build
	%{__make} %{?_smp_mflags}
	cd ../po
	./build_mo.sh
	cd ..
%install
	cd build
	%{__make} DESTDIR="$RPM_BUILD_ROOT" install
	cd ../po
	./install_mo
	cd ..
	%find_lang %{name}
	%if 0%{?suse_version}
		%suse_update_desktop_file %{name}
	%endif

%clean
	%{__rm} -rf "$RPM_BUILD_ROOT"
#menu magic for mandriva
%if 0%{?mdkversion}
%post
	%update_menus
%postun
	%clean_menus
%endif

%files -f %{name}.lang
	%defattr (-, root, root, -)
	#documentation
	%doc Readme.txt
	%doc gpl-3.0.txt
	#the  executable
	%{_bindir}/Agender
	#shortcut
	%{_datadir}/applications/Agender.desktop
	%{_datadir}/pixmaps/Agender.png
	#about
	%{_datadir}/%{name}/hdr.png
	%{_datadir}/%{name}/project-support.jpg
%changelog
* Fri Oct 01 2010 virtuosonic <virtuosonic@users.sourceforge.net>
- added '%changelog' tag
- added translated Summary
*Thu Jan 20 2011 virtuosonic <virtuosonic@users.sourceforge.net>
- Now this file is not generated by configure
*Tue Jan 25 2011 virtuosonic <virtuosonic@users.sourceforge.net>
- added hebrew Summary
*Mon Jan 21 2011 virtuosonic <virtuosonic@users.sourceforge.net>
-added dependency on bakefile
*Tue Feb 01 2011 virtuosonic <virtuosonic@users.sourceforge.net>
-removed some comments that did not make sense
-requires wxGTK 2.8.11
-added about dialog images
*Tue May 03 2011 virtuosonic <virtuosonic@users.sourceforge.net>
- mo catalogs build and install
-requires wxGTK 2.8.12
